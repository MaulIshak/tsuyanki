const d=t=>{if(!t)return"";let a=t;return a=a.replace(/\[sound:(.*?)\]/g,(i,n)=>`<audio src="${c(n)}" data-original-src="${n}" controls></audio>`),a=a.replace(/<img[^>]+src=["'](.*?)["'][^>]*>/g,(i,n)=>`<img src="${c(n)}" data-original-src="${n}">`),a},g=t=>{if(!t)return"";const i=`${new URL("https://perfect-nikon-perception-range.trycloudflare.com/api/v1").origin}/storage/`,n=document.createElement("div");return n.innerHTML=t,n.querySelectorAll("audio").forEach(r=>{let e=r.getAttribute("data-original-src")||r.getAttribute("src");e&&e.startsWith(i)&&(e=e.replace(i,""));const l=document.createTextNode(`[sound:${e}]`);r.parentNode.replaceChild(l,r)}),n.querySelectorAll("img").forEach(r=>{const o=r.getAttribute("data-original-src");let e=o||r.getAttribute("src");e&&e.startsWith(i)&&(e=e.replace(i,"")),o?(r.setAttribute("src",o),r.removeAttribute("data-original-src")):(r.setAttribute("src",e),r.removeAttribute("data-original-src"))}),n.innerHTML},c=t=>{if(t.startsWith("http"))return t;const i=`${new URL("https://perfect-nikon-perception-range.trycloudflare.com/api/v1").origin}/storage`;return t.includes("/")?`${i}/${t}`:`${i}/media/${t}`};export{d,c as r,g as s};
