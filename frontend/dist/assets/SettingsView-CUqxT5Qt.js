import{c as I,r as A,aQ as T,aR as D,o as F,d as B,e as o,f as s,g as m,u as a,p as z,w as t,h as r,aS as E,s as y,m as g,U as v,q as _,k as b,j as x,n as k,a2 as w,P as $,aT as O,aU as q,x as L,y as S,A as d}from"./index-BOzyvhxc.js";import{_ as f}from"./Label-Cvoep8ZL.js";import{a as h,_ as J,b as V,c as R}from"./TabsTrigger-DxXV-QxZ.js";import{_ as C}from"./CardDescription-CBsqXgs6.js";import{_ as U}from"./CardFooter-DmoYhChA.js";const P=I("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const H=I("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Q={class:"space-y-6"},G={key:0,class:"space-y-4"},K={class:"grid gap-2"},W={class:"grid gap-2"},X={class:"flex items-center justify-between rounded-lg border p-4"},Y={class:"space-y-0.5"},Z={class:"w-[100px]"},ee={class:"space-y-2"},ae={class:"grid grid-cols-3 gap-3 max-w-md"},ie={__name:"SettingsView",setup(se){const N="https://hands-dedicated-bold-olympic.trycloudflare.com/api/v1",j=A(!0),i=A(!1),p=T(),l=D({name:"",email:"",preferences:{daily_goal:"20",theme:"system",marketing_emails:!1}}),M=async()=>{const u=localStorage.getItem("auth_token");try{const{data:e}=await L(`${N}/auth/me`,{headers:{Authorization:`Bearer ${u}`}}).json();e.value&&(l.name=e.value.name,l.email=e.value.email,e.value.preferences&&(l.preferences={...l.preferences,...e.value.preferences}))}catch{S.error("Failed to load profile")}finally{j.value=!1}},c=async()=>{i.value=!0;const u=localStorage.getItem("auth_token");try{const{error:e,data:n}=await L(`${N}/auth/profile`,{method:"PUT",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify(l)}).json();if(e.value)throw new Error("Update failed");S.success("Settings updated"),l.preferences.theme==="dark"?p.value=!0:l.preferences.theme==="light"?p.value=!1:(localStorage.removeItem("vueuse-color-scheme"),p.value=window.matchMedia("(prefers-color-scheme: dark)").matches),n.value?.user&&localStorage.setItem("user_data",JSON.stringify(n.value.user))}catch{S.error("Failed to save settings")}finally{i.value=!1}};return F(()=>{M()}),(u,e)=>(d(),B("div",Q,[e[28]||(e[28]=o("div",null,[o("h3",{class:"text-lg font-medium"},"Settings"),o("p",{class:"text-sm text-slate-500"}," Manage your account settings and set e-mail preferences. ")],-1)),s(a(z)),j.value?(d(),B("div",G,[...e[6]||(e[6]=[o("div",{class:"h-64 w-full bg-slate-100 dark:bg-slate-800 animate-pulse rounded-lg"},null,-1)])])):(d(),m(a(R),{key:1,defaultValue:"profile",class:"space-y-4"},{default:t(()=>[s(a(J),null,{default:t(()=>[s(a(h),{value:"profile",class:"gap-2"},{default:t(()=>[s(a(H),{class:"w-4 h-4"}),e[7]||(e[7]=r(" Profile",-1))]),_:1}),s(a(h),{value:"learning",class:"gap-2"},{default:t(()=>[s(a(E),{class:"w-4 h-4"}),e[8]||(e[8]=r(" Learning",-1))]),_:1}),s(a(h),{value:"appearance",class:"gap-2"},{default:t(()=>[s(a(P),{class:"w-4 h-4"}),e[9]||(e[9]=r(" Appearance",-1))]),_:1})]),_:1}),s(a(V),{value:"profile",class:"space-y-4"},{default:t(()=>[s(a(y),null,{default:t(()=>[s(a(g),null,{default:t(()=>[s(a(v),null,{default:t(()=>[...e[10]||(e[10]=[r("Profile Information",-1)])]),_:1}),s(a(C),null,{default:t(()=>[...e[11]||(e[11]=[r("Update your account profile information and email address.",-1)])]),_:1})]),_:1}),s(a(_),{class:"space-y-4"},{default:t(()=>[o("div",K,[s(a(f),{htmlFor:"name"},{default:t(()=>[...e[12]||(e[12]=[r("Display Name",-1)])]),_:1}),s(a(b),{id:"name",modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=n=>l.name=n)},null,8,["modelValue"])]),o("div",W,[s(a(f),{htmlFor:"email"},{default:t(()=>[...e[13]||(e[13]=[r("Email Address",-1)])]),_:1}),s(a(b),{id:"email",modelValue:l.email,"onUpdate:modelValue":e[1]||(e[1]=n=>l.email=n),type:"email"},null,8,["modelValue"])])]),_:1}),s(a(U),{class:"border-t px-6 py-4"},{default:t(()=>[s(a(x),{onClick:c,disabled:i.value},{default:t(()=>[i.value?(d(),m(a(w),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):k("",!0),e[14]||(e[14]=r(" Save Changes ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),s(a(V),{value:"learning",class:"space-y-4"},{default:t(()=>[s(a(y),null,{default:t(()=>[s(a(g),null,{default:t(()=>[s(a(v),null,{default:t(()=>[...e[15]||(e[15]=[r("Learning Preferences",-1)])]),_:1}),s(a(C),null,{default:t(()=>[...e[16]||(e[16]=[r("Customize your daily study goals.",-1)])]),_:1})]),_:1}),s(a(_),{class:"space-y-6"},{default:t(()=>[o("div",X,[o("div",Y,[s(a(f),{class:"text-base"},{default:t(()=>[...e[17]||(e[17]=[r("Daily New Cards Limit",-1)])]),_:1}),e[18]||(e[18]=o("p",{class:"text-sm text-slate-500"},"Maximum number of new cards to introduce per day.",-1))]),o("div",Z,[s(a(b),{type:"number",modelValue:l.preferences.daily_goal,"onUpdate:modelValue":e[2]||(e[2]=n=>l.preferences.daily_goal=n)},null,8,["modelValue"])])])]),_:1}),s(a(U),{class:"border-t px-6 py-4"},{default:t(()=>[s(a(x),{onClick:c,disabled:i.value},{default:t(()=>[i.value?(d(),m(a(w),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):k("",!0),e[19]||(e[19]=r(" Save Preferences ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),s(a(V),{value:"appearance",class:"space-y-4"},{default:t(()=>[s(a(y),null,{default:t(()=>[s(a(g),null,{default:t(()=>[s(a(v),null,{default:t(()=>[...e[20]||(e[20]=[r("Appearance",-1)])]),_:1}),s(a(C),null,{default:t(()=>[...e[21]||(e[21]=[r("Select your preferred theme.",-1)])]),_:1})]),_:1}),s(a(_),{class:"space-y-4"},{default:t(()=>[o("div",ee,[s(a(f),null,{default:t(()=>[...e[22]||(e[22]=[r("Theme",-1)])]),_:1}),o("div",ae,[o("div",{onClick:e[3]||(e[3]=n=>l.preferences.theme="light"),class:$(["flex items-center justify-center gap-2 cursor-pointer rounded-md border-2 p-3 text-sm font-medium transition-colors",l.preferences.theme==="light"?"border-primary bg-background text-primary":"border-muted bg-muted text-muted-foreground hover:bg-muted/80"])},[s(a(O),{class:"w-4 h-4"}),e[23]||(e[23]=r(" Light ",-1))],2),o("div",{onClick:e[4]||(e[4]=n=>l.preferences.theme="dark"),class:$(["flex items-center justify-center gap-2 cursor-pointer rounded-md border-2 p-3 text-sm font-medium transition-colors",l.preferences.theme==="dark"?"border-primary bg-background text-primary":"border-muted bg-muted text-muted-foreground hover:bg-muted/80"])},[s(a(q),{class:"w-4 h-4"}),e[24]||(e[24]=r(" Dark ",-1))],2),o("div",{onClick:e[5]||(e[5]=n=>l.preferences.theme="system"),class:$(["flex items-center justify-center gap-2 cursor-pointer rounded-md border-2 p-3 text-sm font-medium transition-colors",l.preferences.theme==="system"?"border-primary bg-background text-primary":"border-muted bg-muted text-muted-foreground hover:bg-muted/80"])},[s(a(P),{class:"w-4 h-4"}),e[25]||(e[25]=r(" System ",-1))],2)]),e[26]||(e[26]=o("p",{class:"text-xs text-slate-500 mt-2"}," Note: The top-right theme toggle overrides this temporarily. This setting is for your default preference. ",-1))])]),_:1}),s(a(U),{class:"border-t px-6 py-4"},{default:t(()=>[s(a(x),{onClick:c,disabled:i.value},{default:t(()=>[i.value?(d(),m(a(w),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):k("",!0),e[27]||(e[27]=r(" Save Preferences ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}))]))}};export{ie as default};
