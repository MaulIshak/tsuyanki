import{c as Ve,a as N,af as Ze,ag as De,ah as et,r as x,ai as tt,a5 as O,ac as be,ad as Te,aj as Ee,ak as Z,al as at,aa as ce,g as P,A as y,w as p,D as k,n as X,u as e,d as D,R as de,S as _e,G as V,am as lt,Q as re,e as L,an as ot,O as ee,ao as nt,ap as rt,aq as st,ar as it,as as Ne,at as pe,f as S,au as ut,Y as oe,av as dt,aw as ct,ax as $e,a6 as j,o as U,z as le,ay as pt,a8 as M,az as ft,B as we,E as qe,F as xe,aA as vt,aB as mt,h as z,aC as Re,aD as yt,aE as Me,b as gt,ab as ht,aF as _t,aG as St,t as J,I as se,J as Q,P as Fe,aH as Le,v as bt,i as wt,j as ge,m as qt,U as xt,q as Ct,a2 as Ae,k as Bt,s as It,x as he,y as ae}from"./index-BOzyvhxc.js";import{A as Pt,_ as kt}from"./Textarea-CzgoeUDL.js";import{_ as Tt}from"./CardDescription-CBsqXgs6.js";import{_ as Et}from"./CardFooter-DmoYhChA.js";import{S as $t}from"./save-BqDJJ0GO.js";const At=Ve("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Ot=Ve("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function Oe(n,a=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY){return Math.min(t,Math.max(a,n))}function Vt(n){return N(()=>Ze(n)?!!De(n)?.closest("form"):!0)}function Dt(n){const a=et({nonce:x()});return N(()=>n?.value||a.nonce?.value)}const Nt=[" ","Enter","ArrowUp","ArrowDown"],Rt=[" ","Enter"],R=10;function ne(n,a,t){return n===void 0?!1:Array.isArray(n)?n.some(c=>Se(c,a,t)):Se(n,a,t)}function Se(n,a,t){return n===void 0||a===void 0?!1:typeof n=="string"?n===a:typeof t=="function"?t(n,a):typeof t=="string"?n?.[t]===a?.[t]:tt(n,a)}function Mt(n){return n==null||n===""||Array.isArray(n)&&n.length===0}const Ft={key:0,value:""},[K,ze]=ce("SelectRoot");var Lt=O({inheritAttrs:!1,__name:"SelectRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1,default:void 0},by:{type:[String,Function],required:!1},dir:{type:String,required:!1},multiple:{type:Boolean,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","update:open"],setup(n,{emit:a}){const t=n,c=a,{required:l,disabled:o,multiple:u,dir:r}=be(t),s=Te(t,"modelValue",c,{defaultValue:t.defaultValue??(u.value?[]:void 0),passive:t.modelValue===void 0,deep:!0}),d=Te(t,"open",c,{defaultValue:t.defaultOpen,passive:t.open===void 0}),g=x(),_=x(),C=x({x:0,y:0}),q=N(()=>u.value&&Array.isArray(s.value)?s.value?.length===0:Ee(s.value));Z({isProvider:!0});const h=at(r),A=Vt(g),B=x(new Set),v=N(()=>Array.from(B.value).map(i=>i.value).join(";"));function f(i){if(u.value){const b=Array.isArray(s.value)?[...s.value]:[],m=b.findIndex(w=>Se(w,i,t.by));m===-1?b.push(i):b.splice(m,1),s.value=[...b]}else s.value=i}function I(i){return Array.from(B.value).find(b=>ne(i,b.value,t.by))}return ze({triggerElement:g,onTriggerChange:i=>{g.value=i},valueElement:_,onValueElementChange:i=>{_.value=i},contentId:"",modelValue:s,onValueChange:f,by:t.by,open:d,multiple:u,required:l,onOpenChange:i=>{d.value=i},dir:h,triggerPointerDownPosRef:C,disabled:o,isEmptyModelValue:q,optionsSet:B,onOptionAdd:i=>{const b=I(i.value);b&&B.value.delete(b),B.value.add(i)},onOptionRemove:i=>{const b=I(i.value);b&&B.value.delete(b)}}),(i,b)=>(y(),P(e(lt),null,{default:p(()=>[k(i.$slots,"default",{modelValue:e(s),open:e(d)}),e(A)?(y(),P(jt,{key:v.value,"aria-hidden":"true",tabindex:"-1",multiple:e(u),required:e(l),name:i.name,autocomplete:i.autocomplete,disabled:e(o),value:e(s)},{default:p(()=>[e(Ee)(e(s))?(y(),D("option",Ft)):X("v-if",!0),(y(!0),D(de,null,_e(Array.from(B.value),m=>(y(),D("option",V({key:m.value??""},{ref_for:!0},m),null,16))),128))]),_:1},8,["multiple","required","name","autocomplete","disabled","value"])):X("v-if",!0)]),_:3}))}}),zt=Lt,Ht=O({__name:"BubbleSelect",props:{autocomplete:{type:String,required:!1},autofocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},form:{type:String,required:!1},multiple:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},size:{type:Number,required:!1},value:{type:null,required:!1}},setup(n){const a=n,t=x(),c=K();re(()=>a.value,(o,u)=>{const r=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(r,"value").set;if(o!==u&&d&&t.value){const g=new Event("change",{bubbles:!0});d.call(t.value,o),t.value.dispatchEvent(g)}});function l(o){c.onValueChange(o.target.value)}return(o,u)=>(y(),P(e(ot),{"as-child":""},{default:p(()=>[L("select",V({ref_key:"selectElement",ref:t},a,{onInput:l}),[k(o.$slots,"default")],16)]),_:3}))}}),jt=Ht,Ut=O({__name:"SelectPopperPosition",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1,default:"start"},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1,default:R},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const t=ee(n);return(c,l)=>(y(),P(e(nt),V(e(t),{style:{boxSizing:"border-box","--reka-select-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-select-content-available-width":"var(--reka-popper-available-width)","--reka-select-content-available-height":"var(--reka-popper-available-height)","--reka-select-trigger-width":"var(--reka-popper-anchor-width)","--reka-select-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:p(()=>[k(c.$slots,"default")]),_:3},16))}}),Kt=Ut;const Wt={onViewportChange:()=>{},itemTextRefCallback:()=>{},itemRefCallback:()=>{}},[G,He]=ce("SelectContent");var Yt=O({__name:"SelectContentImpl",props:{position:{type:String,required:!1,default:"item-aligned"},bodyLock:{type:Boolean,required:!1,default:!0},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1,default:"start"},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1,default:!0}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(n,{emit:a}){const t=n,c=a,l=K();rt(),st(t.bodyLock);const{CollectionSlot:o,getItems:u}=Z(),r=x();it(r);const{search:s,handleTypeaheadSearch:d}=Ne(),g=x(),_=x(),C=x(),q=x(!1),h=x(!1),A=x(!1);function B(){_.value&&r.value&&$e([_.value,r.value])}re(q,()=>{B()});const{onOpenChange:v,triggerPointerDownPosRef:f}=l;pe(m=>{if(!r.value)return;let w={x:0,y:0};const T=$=>{w={x:Math.abs(Math.round($.pageX)-(f.value?.x??0)),y:Math.abs(Math.round($.pageY)-(f.value?.y??0))}},E=$=>{$.pointerType!=="touch"&&(w.x<=10&&w.y<=10?$.preventDefault():r.value?.contains($.target)||v(!1),document.removeEventListener("pointermove",T),f.value=null)};f.value!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",E,{capture:!0,once:!0})),m(()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",E,{capture:!0})})});function I(m){const w=m.ctrlKey||m.altKey||m.metaKey;if(m.key==="Tab"&&m.preventDefault(),!w&&m.key.length===1&&d(m.key,u()),["ArrowUp","ArrowDown","Home","End"].includes(m.key)){let E=[...u().map($=>$.ref)];if(["ArrowUp","End"].includes(m.key)&&(E=E.slice().reverse()),["ArrowUp","ArrowDown"].includes(m.key)){const $=m.target,te=E.indexOf($);E=E.slice(te+1)}setTimeout(()=>$e(E)),m.preventDefault()}}const i=N(()=>t.position==="popper"?t:{}),b=ee(i.value);return He({content:r,viewport:g,onViewportChange:m=>{g.value=m},itemRefCallback:(m,w,T)=>{const E=!h.value&&!T,$=ne(l.modelValue.value,w,l.by);if(l.multiple.value){if(A.value)return;($||E)&&(_.value=m,$&&(A.value=!0))}else($||E)&&(_.value=m);E&&(h.value=!0)},selectedItem:_,selectedItemText:C,onItemLeave:()=>{r.value?.focus()},itemTextRefCallback:(m,w,T)=>{const E=!h.value&&!T;(ne(l.modelValue.value,w,l.by)||E)&&(C.value=m)},focusSelectedItem:B,position:t.position,isPositioned:q,searchRef:s}),(m,w)=>(y(),P(e(o),null,{default:p(()=>[S(e(ut),{"as-child":"",onMountAutoFocus:w[6]||(w[6]=oe(()=>{},["prevent"])),onUnmountAutoFocus:w[7]||(w[7]=T=>{c("closeAutoFocus",T),!T.defaultPrevented&&(e(l).triggerElement.value?.focus({preventScroll:!0}),T.preventDefault())})},{default:p(()=>[S(e(dt),{"as-child":"","disable-outside-pointer-events":m.disableOutsidePointerEvents,onFocusOutside:w[2]||(w[2]=oe(()=>{},["prevent"])),onDismiss:w[3]||(w[3]=T=>e(l).onOpenChange(!1)),onEscapeKeyDown:w[4]||(w[4]=T=>c("escapeKeyDown",T)),onPointerDownOutside:w[5]||(w[5]=T=>c("pointerDownOutside",T))},{default:p(()=>[(y(),P(ct(m.position==="popper"?Kt:Qt),V({...m.$attrs,...e(b)},{id:e(l).contentId,ref:T=>{const E=e(De)(T);E?.hasAttribute("data-reka-popper-content-wrapper")?r.value=E.firstElementChild:r.value=E},role:"listbox","data-state":e(l).open.value?"open":"closed",dir:e(l).dir.value,style:{display:"flex",flexDirection:"column",outline:"none"},onContextmenu:w[0]||(w[0]=oe(()=>{},["prevent"])),onPlaced:w[1]||(w[1]=T=>q.value=!0),onKeydown:I}),{default:p(()=>[k(m.$slots,"default")]),_:3},16,["id","data-state","dir","onKeydown"]))]),_:3},8,["disable-outside-pointer-events"])]),_:3})]),_:3}))}}),Gt=Yt;const[Ce,Jt]=ce("SelectItemAlignedPosition");var Xt=O({inheritAttrs:!1,__name:"SelectItemAlignedPosition",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["placed"],setup(n,{emit:a}){const t=n,c=a,{getItems:l}=Z(),o=K(),u=G(),r=x(!1),s=x(!0),d=x(),{forwardRef:g,currentElement:_}=j(),{viewport:C,selectedItem:q,selectedItemText:h,focusSelectedItem:A}=u;function B(){if(o.triggerElement.value&&o.valueElement.value&&d.value&&_.value&&C?.value&&q?.value&&h?.value){const I=o.triggerElement.value.getBoundingClientRect(),i=_.value.getBoundingClientRect(),b=o.valueElement.value.getBoundingClientRect(),m=h.value.getBoundingClientRect();if(o.dir.value!=="rtl"){const F=m.left-i.left,H=b.left-F,W=I.left-H,Y=I.width+W,ve=Math.max(Y,i.width),me=window.innerWidth-R,ye=Oe(H,R,Math.max(R,me-ve));d.value.style.minWidth=`${Y}px`,d.value.style.left=`${ye}px`}else{const F=i.right-m.right,H=window.innerWidth-b.right-F,W=window.innerWidth-I.right-H,Y=I.width+W,ve=Math.max(Y,i.width),me=window.innerWidth-R,ye=Oe(H,R,Math.max(R,me-ve));d.value.style.minWidth=`${Y}px`,d.value.style.right=`${ye}px`}const w=l().map(F=>F.ref),T=window.innerHeight-R*2,E=C.value.scrollHeight,$=window.getComputedStyle(_.value),te=Number.parseInt($.borderTopWidth,10),Be=Number.parseInt($.paddingTop,10),Ie=Number.parseInt($.borderBottomWidth,10),Ke=Number.parseInt($.paddingBottom,10),Pe=te+Be+E+Ke+Ie,We=Math.min(q.value.offsetHeight*5,Pe),ke=window.getComputedStyle(C.value),Ye=Number.parseInt(ke.paddingTop,10),Ge=Number.parseInt(ke.paddingBottom,10),ie=I.top+I.height/2-R,Je=T-ie,fe=q.value.offsetHeight/2,Xe=q.value.offsetTop+fe,ue=te+Be+Xe,Qe=Pe-ue;if(ue<=ie){const F=q.value===w[w.length-1];d.value.style.bottom="0px";const H=_.value.clientHeight-C.value.offsetTop-C.value.offsetHeight,W=Math.max(Je,fe+(F?Ge:0)+H+Ie),Y=ue+W;d.value.style.height=`${Y}px`}else{const F=q.value===w[0];d.value.style.top="0px";const W=Math.max(ie,te+C.value.offsetTop+(F?Ye:0)+fe)+Qe;d.value.style.height=`${W}px`,C.value.scrollTop=ue-ie+C.value.offsetTop}d.value.style.margin=`${R}px 0`,d.value.style.minHeight=`${We}px`,d.value.style.maxHeight=`${T}px`,c("placed"),requestAnimationFrame(()=>r.value=!0)}}const v=x("");U(async()=>{await le(),B(),_.value&&(v.value=window.getComputedStyle(_.value).zIndex)});function f(I){I&&s.value===!0&&(B(),A?.(),s.value=!1)}return pt(o.triggerElement,()=>{B()}),Jt({contentWrapper:d,shouldExpandOnScrollRef:r,onScrollButtonChange:f}),(I,i)=>(y(),D("div",{ref_key:"contentWrapperElement",ref:d,style:ft({display:"flex",flexDirection:"column",position:"fixed",zIndex:v.value})},[S(e(M),V({ref:e(g),style:{boxSizing:"border-box",maxHeight:"100%"}},{...I.$attrs,...t}),{default:p(()=>[k(I.$slots,"default")]),_:3},16)],4))}}),Qt=Xt,Zt=O({inheritAttrs:!1,__name:"SelectProvider",props:{context:{type:Object,required:!0}},setup(n){return ze(n.context),He(Wt),(t,c)=>k(t.$slots,"default")}}),ea=Zt;const ta={key:1};var aa=O({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(n,{emit:a}){const t=n,l=we(t,a),o=K(),u=x();U(()=>{u.value=new DocumentFragment});const r=x(),s=N(()=>t.forceMount||o.open.value),d=x(s.value);return re(s,()=>{setTimeout(()=>d.value=s.value)}),(g,_)=>s.value||d.value||r.value?.present?(y(),P(e(vt),{key:0,ref_key:"presenceRef",ref:r,present:s.value},{default:p(()=>[S(Gt,qe(xe({...e(l),...g.$attrs})),{default:p(()=>[k(g.$slots,"default")]),_:3},16)]),_:3},8,["present"])):u.value?(y(),D("div",ta,[(y(),P(mt,{to:u.value},[S(ea,{context:e(o)},{default:p(()=>[k(g.$slots,"default")]),_:3},8,["context"])],8,["to"]))])):X("v-if",!0)}}),la=aa,oa=O({__name:"SelectIcon",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){return(a,t)=>(y(),P(e(M),{"aria-hidden":"true",as:a.as,"as-child":a.asChild},{default:p(()=>[k(a.$slots,"default",{},()=>[t[0]||(t[0]=z("â–¼"))])]),_:3},8,["as","as-child"]))}}),na=oa;const[je,ra]=ce("SelectItem");var sa=O({__name:"SelectItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(n,{emit:a}){const t=n,c=a,{disabled:l}=be(t),o=K(),u=G(),{forwardRef:r,currentElement:s}=j(),{CollectionItem:d}=Z(),g=N(()=>ne(o.modelValue?.value,t.value,o.by)),_=x(!1),C=x(t.textValue??""),q=Re(void 0,"reka-select-item-text"),h="select.select";async function A(i){if(i.defaultPrevented)return;const b={originalEvent:i,value:t.value};yt(h,B,b)}async function B(i){await le(),c("select",i),!i.defaultPrevented&&(l.value||(o.onValueChange(t.value),o.multiple.value||o.onOpenChange(!1)))}async function v(i){await le(),!i.defaultPrevented&&(l.value?u.onItemLeave?.():i.currentTarget?.focus({preventScroll:!0}))}async function f(i){await le(),!i.defaultPrevented&&i.currentTarget===Me()&&u.onItemLeave?.()}async function I(i){await le(),!(i.defaultPrevented||u.searchRef?.value!==""&&i.key===" ")&&(Rt.includes(i.key)&&A(i),i.key===" "&&i.preventDefault())}if(t.value==="")throw new Error("A <SelectItem /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return U(()=>{s.value&&u.itemRefCallback(s.value,t.value,t.disabled)}),ra({value:t.value,disabled:l,textId:q,isSelected:g,onItemTextChange:i=>{C.value=((C.value||i?.textContent)??"").trim()}}),(i,b)=>(y(),P(e(d),{value:{textValue:C.value}},{default:p(()=>[S(e(M),{ref:e(r),role:"option","aria-labelledby":e(q),"data-highlighted":_.value?"":void 0,"aria-selected":g.value,"data-state":g.value?"checked":"unchecked","aria-disabled":e(l)||void 0,"data-disabled":e(l)?"":void 0,tabindex:e(l)?void 0:-1,as:i.as,"as-child":i.asChild,onFocus:b[0]||(b[0]=m=>_.value=!0),onBlur:b[1]||(b[1]=m=>_.value=!1),onPointerup:A,onPointerdown:b[2]||(b[2]=m=>{m.currentTarget.focus({preventScroll:!0})}),onTouchend:b[3]||(b[3]=oe(()=>{},["prevent","stop"])),onPointermove:v,onPointerleave:f,onKeydown:I},{default:p(()=>[k(i.$slots,"default")]),_:3},8,["aria-labelledby","data-highlighted","aria-selected","data-state","aria-disabled","data-disabled","tabindex","as","as-child"])]),_:3},8,["value"]))}}),ia=sa,ua=O({__name:"SelectItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const a=n,t=je();return(c,l)=>e(t).isSelected.value?(y(),P(e(M),V({key:0,"aria-hidden":"true"},a),{default:p(()=>[k(c.$slots,"default")]),_:3},16)):X("v-if",!0)}}),da=ua,ca=O({inheritAttrs:!1,__name:"SelectItemText",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const a=n,t=K(),c=G(),l=je(),{forwardRef:o,currentElement:u}=j(),r=N(()=>({value:l.value,disabled:l.disabled.value,textContent:u.value?.textContent??l.value?.toString()??""}));return U(()=>{u.value&&(l.onItemTextChange(u.value),c.itemTextRefCallback(u.value,l.value,l.disabled.value),t.onOptionAdd(r.value))}),gt(()=>{t.onOptionRemove(r.value)}),(s,d)=>(y(),P(e(M),V({id:e(l).textId,ref:e(o)},{...a,...s.$attrs}),{default:p(()=>[k(s.$slots,"default")]),_:3},16,["id"]))}}),pa=ca,fa=O({__name:"SelectPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(n){const a=n;return(t,c)=>(y(),P(e(ht),qe(xe(a)),{default:p(()=>[k(t.$slots,"default")]),_:3},16))}}),va=fa,ma=O({__name:"SelectScrollButtonImpl",emits:["autoScroll"],setup(n,{emit:a}){const t=a,{getItems:c}=Z(),l=G(),o=x(null);function u(){o.value!==null&&(window.clearInterval(o.value),o.value=null)}pe(()=>{c().map(g=>g.ref).find(g=>g===Me())?.scrollIntoView({block:"nearest"})});function r(){o.value===null&&(o.value=window.setInterval(()=>{t("autoScroll")},50))}function s(){l.onItemLeave?.(),o.value===null&&(o.value=window.setInterval(()=>{t("autoScroll")},50))}return _t(()=>u()),(d,g)=>(y(),P(e(M),V({"aria-hidden":"true",style:{flexShrink:0}},d.$parent?.$props,{onPointerdown:r,onPointermove:s,onPointerleave:g[0]||(g[0]=()=>{u()})}),{default:p(()=>[k(d.$slots,"default")]),_:3},16))}}),Ue=ma,ya=O({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const a=G(),t=a.position==="item-aligned"?Ce():void 0,{forwardRef:c,currentElement:l}=j(),o=x(!1);return pe(u=>{if(a.viewport?.value&&a.isPositioned?.value){let s=function(){const d=r.scrollHeight-r.clientHeight;o.value=Math.ceil(r.scrollTop)<d};const r=a.viewport.value;s(),r.addEventListener("scroll",s),u(()=>r.removeEventListener("scroll",s))}}),re(l,()=>{l.value&&t?.onScrollButtonChange(l.value)}),(u,r)=>o.value?(y(),P(Ue,{key:0,ref:e(c),onAutoScroll:r[0]||(r[0]=()=>{const{viewport:s,selectedItem:d}=e(a);s?.value&&d?.value&&(s.value.scrollTop=s.value.scrollTop+d.value.offsetHeight)})},{default:p(()=>[k(u.$slots,"default")]),_:3},512)):X("v-if",!0)}}),ga=ya,ha=O({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const a=G(),t=a.position==="item-aligned"?Ce():void 0,{forwardRef:c,currentElement:l}=j(),o=x(!1);return pe(u=>{if(a.viewport?.value&&a.isPositioned?.value){let s=function(){o.value=r.scrollTop>0};const r=a.viewport.value;s(),r.addEventListener("scroll",s),u(()=>r.removeEventListener("scroll",s))}}),re(l,()=>{l.value&&t?.onScrollButtonChange(l.value)}),(u,r)=>o.value?(y(),P(Ue,{key:0,ref:e(c),onAutoScroll:r[0]||(r[0]=()=>{const{viewport:s,selectedItem:d}=e(a);s?.value&&d?.value&&(s.value.scrollTop=s.value.scrollTop-d.value.offsetHeight)})},{default:p(()=>[k(u.$slots,"default")]),_:3},512)):X("v-if",!0)}}),_a=ha,Sa=O({__name:"SelectTrigger",props:{disabled:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const a=n,t=K(),{forwardRef:c,currentElement:l}=j(),o=N(()=>t.disabled?.value||a.disabled);t.contentId||=Re(void 0,"reka-select-content"),U(()=>{t.onTriggerChange(l.value)});const{getItems:u}=Z(),{search:r,handleTypeaheadSearch:s,resetTypeahead:d}=Ne();function g(){o.value||(t.onOpenChange(!0),d())}function _(C){g(),t.triggerPointerDownPosRef.value={x:Math.round(C.pageX),y:Math.round(C.pageY)}}return(C,q)=>(y(),P(e(St),{"as-child":"",reference:C.reference},{default:p(()=>[S(e(M),{ref:e(c),role:"combobox",type:C.as==="button"?"button":void 0,"aria-controls":e(t).contentId,"aria-expanded":e(t).open.value||!1,"aria-required":e(t).required?.value,"aria-autocomplete":"none",disabled:o.value,dir:e(t)?.dir.value,"data-state":e(t)?.open.value?"open":"closed","data-disabled":o.value?"":void 0,"data-placeholder":e(Mt)(e(t).modelValue?.value)?"":void 0,"as-child":C.asChild,as:C.as,onClick:q[0]||(q[0]=h=>{h?.currentTarget?.focus()}),onPointerdown:q[1]||(q[1]=h=>{if(h.pointerType==="touch")return h.preventDefault();const A=h.target;A.hasPointerCapture(h.pointerId)&&A.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&(_(h),h.preventDefault())}),onPointerup:q[2]||(q[2]=oe(h=>{h.pointerType==="touch"&&_(h)},["prevent"])),onKeydown:q[3]||(q[3]=h=>{const A=e(r)!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&A&&h.key===" "||(e(s)(h.key,e(u)()),e(Nt).includes(h.key)&&(g(),h.preventDefault()))})},{default:p(()=>[k(C.$slots,"default")]),_:3},8,["type","aria-controls","aria-expanded","aria-required","disabled","dir","data-state","data-disabled","data-placeholder","as-child","as"])]),_:3},8,["reference"]))}}),ba=Sa,wa=O({__name:"SelectValue",props:{placeholder:{type:String,required:!1,default:""},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const a=n,{forwardRef:t,currentElement:c}=j(),l=K();U(()=>{l.valueElement=c});const o=N(()=>{let r=[];const s=Array.from(l.optionsSet.value),d=g=>s.find(_=>ne(g,_.value,l.by));return Array.isArray(l.modelValue.value)?r=l.modelValue.value.map(g=>d(g)?.textContent??""):r=[d(l.modelValue.value)?.textContent??""],r.filter(Boolean)}),u=N(()=>o.value.length?o.value.join(", "):a.placeholder);return(r,s)=>(y(),P(e(M),{ref:e(t),as:r.as,"as-child":r.asChild,style:{pointerEvents:"none"},"data-placeholder":o.value.length?void 0:a.placeholder},{default:p(()=>[k(r.$slots,"default",{selectedLabel:o.value,modelValue:e(l).modelValue.value},()=>[z(J(u.value),1)])]),_:3},8,["as","as-child","data-placeholder"]))}}),qa=wa,xa=O({__name:"SelectViewport",props:{nonce:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const a=n,{nonce:t}=be(a),c=Dt(t),l=G(),o=l.position==="item-aligned"?Ce():void 0,{forwardRef:u,currentElement:r}=j();U(()=>{l?.onViewportChange(r.value)});const s=x(0);function d(g){const _=g.currentTarget,{shouldExpandOnScrollRef:C,contentWrapper:q}=o??{};if(C?.value&&q?.value){const h=Math.abs(s.value-_.scrollTop);if(h>0){const A=window.innerHeight-R*2,B=Number.parseFloat(q.value.style.minHeight),v=Number.parseFloat(q.value.style.height),f=Math.max(B,v);if(f<A){const I=f+h,i=Math.min(A,I),b=I-i;q.value.style.height=`${i}px`,q.value.style.bottom==="0px"&&(_.scrollTop=b>0?b:0,q.value.style.justifyContent="flex-end")}}}s.value=_.scrollTop}return(g,_)=>(y(),D(de,null,[S(e(M),V({ref:e(u),"data-reka-select-viewport":"",role:"presentation"},{...g.$attrs,...a},{style:{position:"relative",flex:1,overflow:"hidden auto"},onScroll:d}),{default:p(()=>[k(g.$slots,"default")]),_:3},16),S(e(M),{as:"style",nonce:e(c)},{default:p(()=>_[0]||(_[0]=[z(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-select-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-reka-select-viewport]::-webkit-scrollbar { display: none; } ")])),_:1,__:[0]},8,["nonce"])],64))}}),Ca=xa;const Ba={__name:"Select",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1},by:{type:[String,Function],required:!1},dir:{type:String,required:!1},multiple:{type:Boolean,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","update:open"],setup(n,{emit:a}){const l=we(n,a);return(o,u)=>(y(),P(e(zt),V({"data-slot":"select"},e(l)),{default:p(r=>[k(o.$slots,"default",qe(xe(r)))]),_:3},16))}},Ia=Object.assign({inheritAttrs:!1},{__name:"SelectContent",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1,default:"popper"},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},class:{type:null,required:!1}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(n,{emit:a}){const t=n,c=a,l=se(t,"class"),o=we(l,c);return(u,r)=>(y(),P(e(va),null,{default:p(()=>[S(e(la),V({"data-slot":"select-content"},{...u.$attrs,...e(o)},{class:e(Q)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--reka-select-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t.class)}),{default:p(()=>[S(e(Ea)),S(e(Ca),{class:Fe(e(Q)("p-1",n.position==="popper"&&"h-[var(--reka-select-trigger-height)] w-full min-w-[var(--reka-select-trigger-width)] scroll-my-1"))},{default:p(()=>[k(u.$slots,"default")]),_:3},8,["class"]),S(e(Ta))]),_:3},16,["class"])]),_:3}))}}),Pa={class:"absolute right-2 flex size-3.5 items-center justify-center"},ka={__name:"SelectItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(n){const a=n,t=se(a,"class"),c=ee(t);return(l,o)=>(y(),P(e(ia),V({"data-slot":"select-item"},e(c),{class:e(Q)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a.class)}),{default:p(()=>[L("span",Pa,[S(e(da),null,{default:p(()=>[k(l.$slots,"indicator-icon",{},()=>[S(e(At),{class:"size-4"})])]),_:3})]),S(e(pa),null,{default:p(()=>[k(l.$slots,"default")]),_:3})]),_:3},16,["class"]))}},Ta={__name:"SelectScrollDownButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(n){const a=n,t=se(a,"class"),c=ee(t);return(l,o)=>(y(),P(e(ga),V({"data-slot":"select-scroll-down-button"},e(c),{class:e(Q)("flex cursor-default items-center justify-center py-1",a.class)}),{default:p(()=>[k(l.$slots,"default",{},()=>[S(e(Le),{class:"size-4"})])]),_:3},16,["class"]))}},Ea={__name:"SelectScrollUpButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(n){const a=n,t=se(a,"class"),c=ee(t);return(l,o)=>(y(),P(e(_a),V({"data-slot":"select-scroll-up-button"},e(c),{class:e(Q)("flex cursor-default items-center justify-center py-1",a.class)}),{default:p(()=>[k(l.$slots,"default",{},()=>[S(e(Ot),{class:"size-4"})])]),_:3},16,["class"]))}},$a={__name:"SelectTrigger",props:{disabled:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1},size:{type:String,required:!1,default:"default"}},setup(n){const a=n,t=se(a,"class","size"),c=ee(t);return(l,o)=>(y(),P(e(ba),V({"data-slot":"select-trigger","data-size":n.size},e(c),{class:e(Q)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a.class)}),{default:p(()=>[k(l.$slots,"default"),S(e(na),{"as-child":""},{default:p(()=>[S(e(Le),{class:"size-4 opacity-50"})]),_:1})]),_:3},16,["data-size","class"]))}},Aa={__name:"SelectValue",props:{placeholder:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const a=n;return(t,c)=>(y(),P(e(qa),V({"data-slot":"select-value"},a),{default:p(()=>[k(t.$slots,"default")]),_:3},16))}},Oa={class:"p-4 lg:p-6 max-w-3xl mx-auto space-y-6"},Va={class:"space-y-2"},Da={key:0,class:"space-y-4"},Na={class:"text-sm font-medium"},Ra={key:1,class:"py-8 text-center text-slate-500"},Ma={key:1},Fa={class:"space-y-2"},La={class:"flex gap-2 w-full sm:w-auto"},Ya={__name:"CardEditorView",setup(n){const a=wt(),t=bt(),c="https://hands-dedicated-bold-olympic.trycloudflare.com/api/v1",l=t.params.deckId,o=t.params.noteId,u=x([]),r=x(null),s=x({}),d=x(""),g=x(!1),_=x(!1),C=N(()=>{const B=u.value.find(v=>v.id===r.value);return!B||!B.field_schema||!B.field_schema.fields?[]:B.field_schema.fields}),q=async()=>{const B=localStorage.getItem("auth_token");try{const{data:v}=await he(`${c}/note-types?per_page=100`,{headers:{Authorization:`Bearer ${B}`}}).json();if(v.value&&v.value.data&&(u.value=v.value.data,!o&&u.value.length>0)){const f=u.value.find(I=>I.name.toLowerCase().includes("basic"));r.value=f?f.id:u.value[0].id}}catch{ae.error("Failed to load note types")}},h=async()=>{if(!o)return;g.value=!0;const B=localStorage.getItem("auth_token");try{const{data:v}=await he(`${c}/notes/${o}`,{headers:{Authorization:`Bearer ${B}`}}).json();if(v.value){const f=v.value;r.value=f.note_type_id,s.value={...f.fields},f.tags&&Array.isArray(f.tags)}}catch{ae.error("Failed to load note")}finally{g.value=!1}},A=async()=>{if(Object.values(s.value).filter(f=>f&&f.trim()).length===0){ae.error("Please fill in at least one field");return}_.value=!0;const v=localStorage.getItem("auth_token");try{let f,I;o?(f=`${c}/notes/${o}`,I="PUT"):(f=`${c}/decks/${l}/notes`,I="POST");const i={note_type_id:r.value,fields:s.value,tags:d.value?d.value.split(",").map(w=>w.trim()).filter(Boolean):[]},{data:b,error:m}=await he(f,{method:I,headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"},body:JSON.stringify(i)}).json();if(m.value)throw new Error(m.value);ae.success(o?"Note updated":"Note created"),o?a.back():(s.value={},d.value="")}catch(f){ae.error("Failed to save note"),console.error(f)}finally{_.value=!1}};return U(()=>{q(),o&&h()}),(B,v)=>(y(),D("div",Oa,[S(e(ge),{variant:"ghost",class:"pl-0 gap-2 text-slate-500 hover:text-slate-900 dark:hover:text-slate-100",onClick:v[0]||(v[0]=f=>e(a).back())},{default:p(()=>[S(e(Pt),{class:"w-4 h-4"}),v[4]||(v[4]=z(" Back ",-1))]),_:1}),S(e(It),null,{default:p(()=>[S(e(qt),null,{default:p(()=>[S(e(xt),null,{default:p(()=>[z(J(e(o)?"Edit Note":"Add New Note"),1)]),_:1}),S(e(Tt),null,{default:p(()=>[z(J(e(o)?"Update the content of this note.":"Create a new note. Cards will be generated automatically."),1)]),_:1})]),_:1}),S(e(Ct),{class:"space-y-6"},{default:p(()=>[L("div",Va,[v[5]||(v[5]=L("label",{class:"text-sm font-medium"},"Type",-1)),S(e(Ba),{modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=f=>r.value=f),disabled:!!e(o)},{default:p(()=>[S(e($a),null,{default:p(()=>[S(e(Aa),{placeholder:"Select a note type"})]),_:1}),S(e(Ia),null,{default:p(()=>[(y(!0),D(de,null,_e(u.value,f=>(y(),P(e(ka),{key:f.id,value:f.id},{default:p(()=>[z(J(f.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),C.value.length>0?(y(),D("div",Da,[(y(!0),D(de,null,_e(C.value,f=>(y(),D("div",{key:f.name,class:"space-y-2"},[L("label",Na,J(f.name),1),S(e(kt),{modelValue:s.value[f.name],"onUpdate:modelValue":I=>s.value[f.name]=I,placeholder:`${f.name} content...`,class:Fe(["resize-none font-medium",f.name.toLowerCase().includes("expression")||f.name.toLowerCase().includes("front")?"h-24 text-lg":"h-16"])},null,8,["modelValue","onUpdate:modelValue","placeholder","class"])]))),128))])):(y(),D("div",Ra,[g.value?(y(),P(e(Ae),{key:0,class:"w-6 h-6 animate-spin mx-auto"})):(y(),D("span",Ma,"Select a note type to see fields."))])),L("div",Fa,[v[6]||(v[6]=L("label",{class:"text-sm font-medium"},"Tags (comma separated)",-1)),S(e(Bt),{modelValue:d.value,"onUpdate:modelValue":v[2]||(v[2]=f=>d.value=f),placeholder:"e.g. jlpt, grammar, verb"},null,8,["modelValue"])])]),_:1}),S(e(Et),{class:"flex flex-col-reverse sm:flex-row justify-between sm:items-center gap-4"},{default:p(()=>[v[8]||(v[8]=L("span",{class:"text-xs text-slate-400 italic text-center sm:text-left"}," * Cards are generated based on the selected Type. ",-1)),L("div",La,[S(e(ge),{variant:"ghost",class:"flex-1 sm:flex-none",onClick:v[3]||(v[3]=f=>e(a).back())},{default:p(()=>[...v[7]||(v[7]=[z("Cancel",-1)])]),_:1}),S(e(ge),{class:"flex-1 sm:flex-none",onClick:A,disabled:_.value},{default:p(()=>[_.value?(y(),P(e(Ae),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(y(),P(e($t),{key:1,class:"w-4 h-4 mr-2"})),z(" "+J(e(o)?"Save Changes":"Add Note"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]))}};export{Ya as default};
