import{c as le,B as W,g as x,A as o,w as a,D,E as oe,F as ne,G as S,u as e,H as re,I as A,J as q,K as de,f as s,L as ie,n as L,M as ue,e as r,X as ce,N as fe,O as X,d as p,P as Z,r as g,Q as pe,o as me,h as d,i as _e,j as C,k as I,R as O,S as N,m as H,_ as V,q as K,s as Q,T as Y,U as ge,t as b,V as ve,W as ye,Y as P,Z as xe,$ as T,a0 as ke,x as G,y as J,v as he,a1 as be}from"./index-DAVXUDKV.js";import{_ as we}from"./CardFooter-CmcnJwzT.js";import{D as $e,a as De,P as Ce,E as qe,_ as Be,b as Pe,c as Se,d as je,e as ze,f as Ee,g as Oe,h as Ve,i as Le,j as Ae,k as Fe,l as Ne,m as Te,n as Me,o as Ue,p as Re}from"./AlertDialogTitle-CwSh_GVz.js";import{_ as Ie}from"./Label-CMJMuMs1.js";const He=le("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Ke={__name:"Dialog",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(c,{emit:n}){const f=W(c,n);return(v,k)=>(o(),x(e(re),S({"data-slot":"dialog"},e(f)),{default:a(h=>[D(v.$slots,"default",oe(ne(h)))]),_:3},16))}},Qe={__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const n=c,i=A(n,"class");return(u,f)=>(o(),x(e(de),S({"data-slot":"dialog-overlay"},e(i),{class:e(q)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",n.class)}),{default:a(()=>[D(u.$slots,"default")]),_:3},16,["class"]))}},Ye=Object.assign({inheritAttrs:!1},{__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1},showCloseButton:{type:Boolean,required:!1,default:!0}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(c,{emit:n}){const i=c,u=n,f=A(i,"class"),v=W(f,u);return(k,h)=>(o(),x(e(fe),null,{default:a(()=>[s(Qe),s(e(ie),S({"data-slot":"dialog-content"},{...k.$attrs,...e(v)},{class:e(q)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",i.class)}),{default:a(()=>[D(k.$slots,"default"),c.showCloseButton?(o(),x(e(ue),{key:0,"data-slot":"dialog-close",class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},{default:a(()=>[s(e(ce)),h[0]||(h[0]=r("span",{class:"sr-only"},"Close",-1))]),_:1})):L("",!0)]),_:3},16,["class"])]),_:3}))}}),Ge={__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const n=c,i=A(n,"class"),u=X(i);return(f,v)=>(o(),x(e($e),S({"data-slot":"dialog-description"},e(u),{class:e(q)("text-muted-foreground text-sm",n.class)}),{default:a(()=>[D(f.$slots,"default")]),_:3},16,["class"]))}},Je={__name:"DialogFooter",props:{class:{type:null,required:!1}},setup(c){const n=c;return(i,u)=>(o(),p("div",{"data-slot":"dialog-footer",class:Z(e(q)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n.class))},[D(i.$slots,"default")],2))}},We={__name:"DialogHeader",props:{class:{type:null,required:!1}},setup(c){const n=c;return(i,u)=>(o(),p("div",{"data-slot":"dialog-header",class:Z(e(q)("flex flex-col gap-2 text-center sm:text-left",n.class))},[D(i.$slots,"default")],2))}},Xe={__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const n=c,i=A(n,"class"),u=X(i);return(f,v)=>(o(),x(e(De),S({"data-slot":"dialog-title"},e(u),{class:e(q)("text-lg leading-none font-semibold",n.class)}),{default:a(()=>[D(f.$slots,"default")]),_:3},16,["class"]))}},Ze={class:"p-4 lg:p-6 space-y-6 max-w-7xl mx-auto"},et={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},tt={class:"relative w-full max-w-md"},st={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},at={key:1,class:"text-center py-20 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-dashed border-slate-300 dark:border-slate-800"},lt={class:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4"},ot={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},nt={class:"space-y-1 pr-4"},rt={class:"text-xs text-slate-500 dark:text-slate-400 line-clamp-2 min-h-[2.5em]"},dt={class:"flex items-center justify-between text-sm"},it={class:"flex items-center gap-1.5 text-slate-600 dark:text-slate-400"},ut={class:"flex items-center gap-1"},ct={key:3,class:"flex justify-center pt-8 pb-4"},ft={key:0,class:"font-bold text-slate-900 dark:text-slate-100"},pt={class:"grid gap-4 py-4"},mt={class:"grid grid-cols-4 items-center gap-4"},_t={key:0,class:"col-span-4 text-xs text-slate-500 text-right"},kt={__name:"DeckListView",setup(c){const n=_e();he();const i="https://hands-dedicated-bold-olympic.trycloudflare.com/api/v1",u=g([]),f=g(0),v=g(1),k=g(""),h=g(!0),w=g(null),j=g(20),z=g(!1),M=y=>{w.value=y,j.value=20,z.value=!0},ee=()=>{w.value&&(z.value=!1,n.push({path:"/study",query:{deck_id:w.value.id,limit:j.value}}))},F=async()=>{h.value=!0;const y=localStorage.getItem("auth_token"),t=v.value,l=k.value,_=new URL(`${i}/decks`);_.searchParams.append("page",t),_.searchParams.append("limit",6),l&&_.searchParams.append("search",l);try{const{data:m}=await G(_.toString(),{headers:{Authorization:`Bearer ${y}`}}).json();m.value&&(u.value=m.value.data,f.value=m.value.meta.total,v.value=m.value.meta.current_page)}catch(m){console.error(m)}finally{h.value=!1}},te=be(()=>{v.value=1,F()},500);pe(k,te),me(()=>{F()});const $=g(null),E=g(!1),B=g(!1),se=y=>{$.value=y,E.value=!0},ae=async()=>{if(!$.value)return;B.value=!0;const y=localStorage.getItem("auth_token");try{const{error:t}=await G(`${i}/decks/${$.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${y}`}});if(t.value)throw new Error("Delete failed");J.success("Deck deleted"),u.value=u.value.filter(l=>l.id!==$.value.id),f.value--}catch{J.error("Failed to delete deck")}finally{B.value=!1,E.value=!1,$.value=null}},U=y=>{n.push(`/decks/${y}`)};return(y,t)=>(o(),p("div",Ze,[r("div",et,[t[9]||(t[9]=r("div",null,[r("h1",{class:"text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-50"},"My Decks"),r("p",{class:"text-slate-500 dark:text-slate-400"},"Manage your flashcard collections.")],-1)),s(e(C),{onClick:t[0]||(t[0]=l=>e(n).push("/decks/create")),class:"gap-2"},{default:a(()=>[s(e(Ce),{class:"w-4 h-4"}),t[8]||(t[8]=d(" Create Deck ",-1))]),_:1})]),r("div",tt,[s(e(He),{class:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-400"}),s(e(I),{modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=l=>k.value=l),type:"search",placeholder:"Search decks...",class:"pl-8 bg-white dark:bg-slate-900"},null,8,["modelValue"])]),h.value?(o(),p("div",st,[(o(),p(O,null,N(6,l=>s(e(Q),{key:l,class:"overflow-hidden"},{default:a(()=>[s(e(H),{class:"pb-2"},{default:a(()=>[s(e(V),{class:"h-6 w-3/4 mb-2"}),s(e(V),{class:"h-4 w-1/2"})]),_:1}),s(e(K),null,{default:a(()=>[s(e(V),{class:"h-4 w-full mb-2"}),s(e(V),{class:"h-4 w-2/3"})]),_:1})]),_:1})),64))])):u.value.length===0?(o(),p("div",at,[r("div",lt,[s(e(Y),{class:"w-8 h-8 text-slate-400"})]),t[11]||(t[11]=r("h3",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2"},"No decks found",-1)),t[12]||(t[12]=r("p",{class:"text-slate-500 dark:text-slate-400 mb-6 max-w-sm mx-auto"},"You haven't created any decks yet, or your search returned no results.",-1)),s(e(C),{onClick:t[2]||(t[2]=l=>e(n).push("/decks/create")),variant:"outline"},{default:a(()=>[...t[10]||(t[10]=[d("Create your first deck",-1)])]),_:1})])):(o(),p("div",ot,[(o(!0),p(O,null,N(u.value,l=>(o(),x(e(Q),{key:l.id,class:"group hover:border-indigo-400 dark:hover:border-indigo-500 transition-colors cursor-pointer flex flex-col",onClick:_=>U(l.id)},{default:a(()=>[s(e(H),{class:"flex flex-row items-start justify-between space-y-0"},{default:a(()=>[r("div",nt,[s(e(ge),{class:"text-base line-clamp-1 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"},{default:a(()=>[d(b(l.title),1)]),_:2},1024),r("p",rt,b(l.description||"No description provided."),1)]),s(e(ve),null,{default:a(()=>[s(e(ye),{"as-child":""},{default:a(()=>[s(e(C),{variant:"ghost",size:"icon",class:"-mt-1 -mr-2 h-6 w-6 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",onClick:t[3]||(t[3]=P(()=>{},["stop"]))},{default:a(()=>[s(e(qe),{class:"w-4 h-4"})]),_:1})]),_:1}),s(e(xe),{align:"end"},{default:a(()=>[s(e(T),{onClick:P(_=>U(l.id),["stop"])},{default:a(()=>[...t[13]||(t[13]=[d("Edit Deck",-1)])]),_:1},8,["onClick"]),s(e(T),{onClick:P(_=>M(l),["stop"])},{default:a(()=>[...t[14]||(t[14]=[d("Study Now",-1)])]),_:1},8,["onClick"]),s(e(T),{onClick:P(_=>se(l),["stop"]),class:"text-red-600 focus:text-red-600"},{default:a(()=>[...t[15]||(t[15]=[d("Delete",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),s(e(K),{class:"flex-1 p-4 pt-2"},{default:a(()=>[r("div",dt,[r("div",it,[s(e(Y),{class:"w-4 h-4"}),r("span",null,b(l.notes_count||0)+" notes",1)])])]),_:2},1024),s(e(we),{class:"border-t bg-slate-50/50 dark:bg-slate-900/30 text-xs text-slate-500 dark:text-slate-400 flex justify-between items-center"},{default:a(()=>[r("div",ut,[s(e(ke),{class:"w-3 h-3"}),t[16]||(t[16]=r("span",null,"Last studied: Never",-1))]),s(e(C),{size:"sm",variant:"ghost",class:"h-6 text-xs hover:bg-white dark:hover:bg-slate-800",onClick:P(_=>M(l),["stop"])},{default:a(()=>[...t[17]||(t[17]=[d(" Study ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])),f.value>6?(o(),p("div",ct,[s(e(Ve),{total:f.value,"sibling-count":1,"show-edges":"","default-page":1,"items-per-page":6,"onUpdate:page":t[4]||(t[4]=l=>{v.value=l,F()})},{default:a(({page:l})=>[s(e(Be),{class:"flex items-center gap-1"},{default:a(({items:_})=>[s(e(Pe)),s(e(Se)),(o(!0),p(O,null,N(_,(m,R)=>(o(),p(O,null,[m.type==="page"?(o(),x(e(je),{key:R,value:m.value,"as-child":""},{default:a(()=>[s(e(C),{class:"w-10 h-10 p-0",variant:m.value===l?"default":"outline"},{default:a(()=>[d(b(m.value),1)]),_:2},1032,["variant"])]),_:2},1032,["value"])):(o(),x(e(ze),{key:m.type,index:R},null,8,["index"]))],64))),256)),s(e(Ee)),s(e(Oe))]),_:2},1024)]),_:1},8,["total"])])):L("",!0),s(e(Re),{open:E.value,"onUpdate:open":t[5]||(t[5]=l=>E.value=l)},{default:a(()=>[s(e(Le),null,{default:a(()=>[s(e(Ae),null,{default:a(()=>[s(e(Fe),null,{default:a(()=>[...t[18]||(t[18]=[d("Are you absolutely sure?",-1)])]),_:1}),s(e(Ne),null,{default:a(()=>[t[19]||(t[19]=d(" This action cannot be undone. This will permanently delete the deck ",-1)),$.value?(o(),p("span",ft,'"'+b($.value.title)+'"',1)):L("",!0),t[20]||(t[20]=d(" and all its cards. ",-1))]),_:1})]),_:1}),s(e(Te),null,{default:a(()=>[s(e(Me),{disabled:B.value},{default:a(()=>[...t[21]||(t[21]=[d("Cancel",-1)])]),_:1},8,["disabled"]),s(e(Ue),{onClick:ae,disabled:B.value,class:"bg-red-600 hover:bg-red-700 focus:ring-red-600 text-white"},{default:a(()=>[d(b(B.value?"Deleting...":"Delete"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),s(e(Ke),{open:z.value,"onUpdate:open":t[7]||(t[7]=l=>z.value=l)},{default:a(()=>[s(e(Ye),{class:"sm:max-w-[425px]"},{default:a(()=>[s(e(We),null,{default:a(()=>[s(e(Xe),null,{default:a(()=>[d('Study "'+b(w.value?.title)+'"',1)]),_:1}),s(e(Ge),null,{default:a(()=>[...t[22]||(t[22]=[d(" How many cards would you like to review in this session? ",-1)])]),_:1})]),_:1}),r("div",pt,[r("div",mt,[s(e(Ie),{for:"limit",class:"text-right"},{default:a(()=>[...t[23]||(t[23]=[d(" Cards ",-1)])]),_:1}),s(e(I),{id:"limit",modelValue:j.value,"onUpdate:modelValue":t[6]||(t[6]=l=>j.value=l),type:"number",min:"1",max:w.value?.notes_count||100,class:"col-span-3"},null,8,["modelValue","max"]),w.value?(o(),p("p",_t," Max available: "+b(w.value.notes_count),1)):L("",!0)])]),s(e(Je),null,{default:a(()=>[s(e(C),{onClick:ee},{default:a(()=>[...t[24]||(t[24]=[d("Start Session",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}};export{kt as default};
