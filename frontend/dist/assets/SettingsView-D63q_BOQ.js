import{c as E,d as L,ac as P,b as y,o as d,w as r,r as U,n as F,g as M,u as t,b0 as q,m as G,h as C,b1 as H,ay as J,i as O,l as n,p as a,q as s,H as V,x as l,y as v,G as A,s as f,E as R,B as _,X as j,A as h,b2 as K,z as S,b3 as X,b4 as Z,b5 as Q,J as D,K as p,N as W}from"./index-ZLCpMZbQ.js";import{_ as k}from"./Label-C5Df49en.js";import{_ as T}from"./CardFooter-DApZZFYr.js";import{g as Y,_ as ee,a as te,b as se,c as ae,d as re,e as oe,f as le}from"./AlertDialogTitle-iSL8dLLQ.js";import"./DialogTitle-6lcKACdm.js";const B=E("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const de=E("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var ie=L({__name:"AlertDialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(x){const g=x;return P(),(c,u)=>(d(),y(t(q),F(M(g)),{default:r(()=>[U(c.$slots,"default")]),_:3},16))}}),ne=ie;const ue={__name:"AlertDialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(x){const g=x;return(c,u)=>(d(),y(t(ne),G({"data-slot":"alert-dialog-trigger"},g),{default:r(()=>[U(c.$slots,"default")]),_:3},16))}},ge={class:"max-w-4xl mx-auto space-y-8 pb-12"},ce={key:0,class:"space-y-6"},me={key:1,class:"grid gap-8"},fe={class:"space-y-4"},pe={class:"flex items-center gap-2 text-indigo-600 dark:text-indigo-400 font-semibold uppercase tracking-wider text-xs ml-1"},xe={class:"flex flex-col md:flex-row gap-8 items-start"},be={class:"flex-1 space-y-4 w-full"},ve={class:"grid gap-2"},_e={class:"grid gap-2"},he={key:0,class:"text-[10px] text-muted-foreground"},ke={class:"flex flex-col items-center gap-4 p-6 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-800 w-full md:w-auto shrink-0"},ye={class:"relative"},we=["src"],$e={key:1,class:"w-24 h-24 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-300 font-bold text-3xl border-4 border-white dark:border-slate-800 shadow-md"},Ce={key:2,class:"absolute -bottom-1 -right-1 bg-white dark:bg-slate-800 rounded-full p-1.5 border dark:border-slate-700 shadow-sm",title:"Connected with Google"},Ae={class:"text-center"},Se={key:0,class:"font-medium text-sm"},De={key:1,class:"text-[10px] text-muted-foreground"},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},Ve={class:"space-y-4"},je={class:"flex items-center gap-2 text-indigo-600 dark:text-indigo-400 font-semibold uppercase tracking-wider text-xs ml-1"},Be={class:"space-y-4"},Ee={class:"flex items-center gap-4"},Ue={class:"space-y-4"},ze={class:"flex items-center gap-2 text-indigo-600 dark:text-indigo-400 font-semibold uppercase tracking-wider text-xs ml-1"},Ie={class:"space-y-4"},Ne={class:"grid grid-cols-3 gap-3"},Le={class:"space-y-4 pt-8"},Pe={class:"flex items-center gap-2 text-red-600 dark:text-red-400 font-semibold uppercase tracking-wider text-xs ml-1"},Je={__name:"SettingsView",setup(x){const g="https://perfect-nikon-perception-range.trycloudflare.com/api/v1",c=C(!0),u=C(!1),b=C(!1),w=H(),z=W(),o=J({name:"",email:"",avatar:"",google_id:null,preferences:{daily_goal:"20",theme:"system",marketing_emails:!1}}),I=async()=>{const m=localStorage.getItem("auth_token");try{const{data:e}=await D(`${g}/auth/me`,{headers:{Authorization:`Bearer ${m}`}}).json();e.value&&(o.name=e.value.name,o.email=e.value.email,o.avatar=e.value.avatar,o.google_id=e.value.google_id,e.value.preferences&&(o.preferences={...o.preferences,...e.value.preferences}))}catch{p.error("Failed to load profile")}finally{c.value=!1}},$=async()=>{u.value=!0;const m=localStorage.getItem("auth_token");try{const{error:e,data:i}=await D(`${g}/auth/profile`,{method:"PUT",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify(o)}).json();if(e.value)throw new Error("Update failed");p.success("Settings updated"),o.preferences.theme==="dark"?w.value=!0:o.preferences.theme==="light"?w.value=!1:(localStorage.removeItem("vueuse-color-scheme"),w.value=window.matchMedia("(prefers-color-scheme: dark)").matches),i.value?.user&&localStorage.setItem("user_data",JSON.stringify(i.value.user))}catch{p.error("Failed to save settings")}finally{u.value=!1}},N=async()=>{b.value=!0;const m=localStorage.getItem("auth_token");try{const{error:e}=await D(`${g}/auth/user`,{method:"DELETE",headers:{Authorization:`Bearer ${m}`}}).json();if(e.value)throw new Error("Deletion failed");p.success("Account deleted successfully"),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),z.push("/login")}catch{p.error("Failed to delete account")}finally{b.value=!1}};return O(()=>{I()}),(m,e)=>(d(),n("div",ge,[e[30]||(e[30]=a("div",null,[a("h3",{class:"text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-100"},"Settings"),a("p",{class:"text-slate-500 dark:text-slate-400 mt-2 text-lg"}," Manage your account settings and preferences. ")],-1)),c.value?(d(),n("div",ce,[s(t(V),{class:"h-64 w-full rounded-2xl"}),s(t(V),{class:"h-48 w-full rounded-2xl"})])):(d(),n("div",me,[a("section",fe,[a("div",pe,[s(t(de),{class:"w-4 h-4"}),e[6]||(e[6]=l(" Profile ",-1))]),s(t(h),{class:"border-indigo-100 dark:border-indigo-900/50 shadow-sm overflow-hidden"},{default:r(()=>[s(t(v),{class:"p-6 md:p-8 space-y-8"},{default:r(()=>[a("div",xe,[a("div",be,[a("div",ve,[s(t(k),{htmlFor:"name"},{default:r(()=>[...e[7]||(e[7]=[l("Display Name",-1)])]),_:1}),s(t(A),{id:"name",modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=i=>o.name=i),class:"h-11 bg-slate-50 dark:bg-slate-900"},null,8,["modelValue"])]),a("div",_e,[s(t(k),{htmlFor:"email"},{default:r(()=>[...e[8]||(e[8]=[l("Email Address",-1)])]),_:1}),s(t(A),{id:"email",modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=i=>o.email=i),type:"email",disabled:!!o.google_id,class:"h-11 bg-slate-50 dark:bg-slate-900"},null,8,["modelValue","disabled"]),o.google_id?(d(),n("p",he,"Email managed by Google.")):f("",!0)])]),a("div",ke,[a("div",ye,[o.avatar?(d(),n("img",{key:0,src:o.avatar,alt:"Avatar",class:"w-24 h-24 rounded-full border-4 border-white dark:border-slate-800 shadow-md object-cover"},null,8,we)):(d(),n("div",$e,R(o.name?.charAt(0).toUpperCase()),1)),o.google_id?(d(),n("div",Ce,[...e[9]||(e[9]=[a("svg",{class:"w-5 h-5","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512"},[a("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"})],-1)])])):f("",!0)]),a("div",Ae,[o.google_id?(d(),n("p",Se,"Google Account")):f("",!0),o.google_id?(d(),n("p",De,"Linked")):f("",!0)])])])]),_:1}),s(t(T),{class:"border-t bg-slate-50/50 dark:bg-slate-900/50 px-6 py-4 flex justify-end"},{default:r(()=>[s(t(_),{onClick:$,disabled:u.value,class:"bg-indigo-600 hover:bg-indigo-700 text-white min-w-[120px]"},{default:r(()=>[u.value?(d(),y(t(j),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):f("",!0),e[10]||(e[10]=l(" Save Changes ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),a("div",Te,[a("section",Ve,[a("div",je,[s(t(K),{class:"w-4 h-4"}),e[11]||(e[11]=l(" Learning ",-1))]),s(t(h),{class:"flex-1 h-full shadow-sm"},{default:r(()=>[s(t(v),{class:"p-6 space-y-6"},{default:r(()=>[a("div",Be,[s(t(k),{class:"text-base font-medium"},{default:r(()=>[...e[12]||(e[12]=[l("Daily New Cards",-1)])]),_:1}),e[14]||(e[14]=a("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"How many new cards do you want to learn each day?",-1)),a("div",Ee,[s(t(A),{type:"number",modelValue:o.preferences.daily_goal,"onUpdate:modelValue":e[2]||(e[2]=i=>o.preferences.daily_goal=i),class:"w-24 text-center text-lg font-bold"},null,8,["modelValue"]),e[13]||(e[13]=a("span",{class:"text-sm text-slate-500"},"cards / day",-1))])])]),_:1}),s(t(T),{class:"border-t bg-slate-50/50 dark:bg-slate-900/50 px-6 py-4 flex justify-end"},{default:r(()=>[s(t(_),{variant:"ghost",size:"sm",onClick:$,disabled:u.value,class:"text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 dark:hover:bg-indigo-900/20"},{default:r(()=>[...e[15]||(e[15]=[l(" Update ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),a("section",Ue,[a("div",ze,[s(t(B),{class:"w-4 h-4"}),e[16]||(e[16]=l(" Appearance ",-1))]),s(t(h),{class:"flex-1 h-full shadow-sm"},{default:r(()=>[s(t(v),{class:"p-6 space-y-6"},{default:r(()=>[a("div",Ie,[s(t(k),{class:"text-base font-medium"},{default:r(()=>[...e[17]||(e[17]=[l("Theme Preference",-1)])]),_:1}),e[21]||(e[21]=a("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Choose how Tsuyanki looks to you.",-1)),a("div",Ne,[a("div",{onClick:e[3]||(e[3]=i=>o.preferences.theme="light"),class:S(["flex flex-col items-center justify-center gap-2 cursor-pointer rounded-xl border-2 p-4 text-sm font-medium transition-all hover:scale-[1.02]",o.preferences.theme==="light"?"border-indigo-600 bg-indigo-50 text-indigo-700 dark:bg-indigo-900/20 dark:text-indigo-300":"border-slate-200 bg-white dark:bg-slate-950 dark:border-slate-800 text-slate-600 hover:border-indigo-200"])},[s(t(X),{class:"w-6 h-6"}),e[18]||(e[18]=l(" Light ",-1))],2),a("div",{onClick:e[4]||(e[4]=i=>o.preferences.theme="dark"),class:S(["flex flex-col items-center justify-center gap-2 cursor-pointer rounded-xl border-2 p-4 text-sm font-medium transition-all hover:scale-[1.02]",o.preferences.theme==="dark"?"border-indigo-600 bg-indigo-50 text-indigo-700 dark:bg-indigo-900/20 dark:text-indigo-300":"border-slate-200 bg-white dark:bg-slate-950 dark:border-slate-800 text-slate-600 hover:border-indigo-200"])},[s(t(Z),{class:"w-6 h-6"}),e[19]||(e[19]=l(" Dark ",-1))],2),a("div",{onClick:e[5]||(e[5]=i=>o.preferences.theme="system"),class:S(["flex flex-col items-center justify-center gap-2 cursor-pointer rounded-xl border-2 p-4 text-sm font-medium transition-all hover:scale-[1.02]",o.preferences.theme==="system"?"border-indigo-600 bg-indigo-50 text-indigo-700 dark:bg-indigo-900/20 dark:text-indigo-300":"border-slate-200 bg-white dark:bg-slate-950 dark:border-slate-800 text-slate-600 hover:border-indigo-200"])},[s(t(B),{class:"w-6 h-6"}),e[20]||(e[20]=l(" Auto ",-1))],2)])])]),_:1}),s(t(T),{class:"border-t bg-slate-50/50 dark:bg-slate-900/50 px-6 py-4 flex justify-end"},{default:r(()=>[s(t(_),{variant:"ghost",size:"sm",onClick:$,disabled:u.value,class:"text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 dark:hover:bg-indigo-900/20"},{default:r(()=>[...e[22]||(e[22]=[l(" Update ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})])]),a("section",Le,[a("div",Pe,[s(t(Q),{class:"w-4 h-4"}),e[23]||(e[23]=l(" Danger Zone ",-1))]),s(t(h),{class:"border-red-100 bg-red-50/30 dark:border-red-900/30 dark:bg-red-900/10 shadow-sm border-dashed"},{default:r(()=>[s(t(v),{class:"p-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-6"},{default:r(()=>[e[29]||(e[29]=a("div",{class:"space-y-1"},[a("h4",{class:"font-medium text-red-900 dark:text-red-200"},"Delete Account"),a("p",{class:"text-sm text-red-700/80 dark:text-red-300/70 max-w-lg"}," Permanently remove your account and all of its contents from the Tsuyanki servers. This action is not reversible, so please continue with caution. ")],-1)),s(t(Y),null,{default:r(()=>[s(t(ue),{asChild:""},{default:r(()=>[s(t(_),{variant:"destructive",disabled:b.value,class:"shrink-0 bg-white text-red-600 border border-red-200 hover:bg-red-50 hover:border-red-300 dark:bg-red-950 dark:text-red-400 dark:border-red-900 dark:hover:bg-red-900 shadow-sm"},{default:r(()=>[b.value?(d(),y(t(j),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):f("",!0),e[24]||(e[24]=l(" Delete Account ",-1))]),_:1},8,["disabled"])]),_:1}),s(t(ee),null,{default:r(()=>[s(t(te),null,{default:r(()=>[s(t(se),null,{default:r(()=>[...e[25]||(e[25]=[l("Are you absolutely sure?",-1)])]),_:1}),s(t(ae),null,{default:r(()=>[...e[26]||(e[26]=[l(" This action cannot be undone. This will permanently delete your account and remove your data from our servers. ",-1)])]),_:1})]),_:1}),s(t(re),null,{default:r(()=>[s(t(oe),null,{default:r(()=>[...e[27]||(e[27]=[l("Cancel",-1)])]),_:1}),s(t(le),{onClick:N,class:"bg-red-600 hover:bg-red-700 text-white"},{default:r(()=>[...e[28]||(e[28]=[l(" Continue ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]))]))}};export{Je as default};
