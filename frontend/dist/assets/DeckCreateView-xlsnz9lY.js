import{h as f,l as y,q as s,w as t,x as r,u as a,N as b,B as u,t as w,v as x,y as $,p as i,G as g,b as v,X as C,A as V,K as c,J as B,o as m}from"./index-D72fFMdT.js";import{_ as S}from"./Textarea-CoAuhMq-.js";import{_ as N}from"./CardDescription-D87oNkE9.js";import{_ as A}from"./CardFooter-DeXfPyl4.js";import{A as D}from"./arrow-left-ZXnkBiuS.js";import{S as h}from"./save-rDh4tzbt.js";const j={class:"p-6 max-w-2xl mx-auto space-y-6"},E={class:"space-y-2"},J={class:"space-y-2"},I={__name:"DeckCreateView",setup(L){const d=b(),_="https://perfect-nikon-perception-range.trycloudflare.com/api/v1",o=f({name:"",description:""}),n=f(!1),k=async()=>{if(!o.value.name){c.error("Deck name is required");return}n.value=!0;const p=localStorage.getItem("auth_token");try{const{data:e,error:l}=await B(`${_}/decks`,{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify({title:o.value.name,description:o.value.description})}).json();if(l.value)throw new Error(l.value);c.success("Deck created successfully"),d.push("/decks")}catch{c.error("Failed to create deck")}finally{n.value=!1}};return(p,e)=>(m(),y("div",j,[s(a(u),{variant:"ghost",class:"pl-0 gap-2 text-slate-500 hover:text-slate-900 dark:hover:text-slate-100",onClick:e[0]||(e[0]=l=>a(d).back())},{default:t(()=>[s(a(D),{class:"w-4 h-4"}),e[4]||(e[4]=r(" Back ",-1))]),_:1}),s(a(V),null,{default:t(()=>[s(a(w),null,{default:t(()=>[s(a(x),null,{default:t(()=>[...e[5]||(e[5]=[r("Create New Deck",-1)])]),_:1}),s(a(N),null,{default:t(()=>[...e[6]||(e[6]=[r("Create a collection of cards to study a specific topic.",-1)])]),_:1})]),_:1}),s(a($),{class:"space-y-4"},{default:t(()=>[i("div",E,[e[7]||(e[7]=i("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"Name",-1)),s(a(g),{modelValue:o.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.name=l),placeholder:"e.g. Japanese Core 2000"},null,8,["modelValue"])]),i("div",J,[e[8]||(e[8]=i("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"Description (Optional)",-1)),s(a(S),{modelValue:o.value.description,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.description=l),placeholder:"What is this deck about?",class:"resize-none h-32"},null,8,["modelValue"])])]),_:1}),s(a(A),{class:"flex justify-end gap-2"},{default:t(()=>[s(a(u),{variant:"ghost",onClick:e[3]||(e[3]=l=>a(d).back())},{default:t(()=>[...e[9]||(e[9]=[r("Cancel",-1)])]),_:1}),s(a(u),{onClick:k,disabled:n.value},{default:t(()=>[n.value?(m(),v(a(C),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(m(),v(a(h),{key:1,class:"w-4 h-4 mr-2"})),e[10]||(e[10]=r(" Create Deck ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]))}};export{I as default};
