import{c as F,l as m,o,r as M,z as y,u as t,f as q,a_ as te,h as k,p as l,q as a,w as s,x as r,I as $,F as ae,D as se,b as I,C as N,E as f,s as T,t as P,v as U,y as L,S as D,B as S,a$ as R,X as le,N as re,A as oe,J as de,K as j}from"./index-D72fFMdT.js";import{_ as G}from"./CardDescription-D87oNkE9.js";import{_ as J}from"./CardFooter-DeXfPyl4.js";import{_ as ie}from"./Progress-hUqSwmn9.js";import{_ as ne,a as ue,b as A,c as z,d as fe,e as c}from"./TableHeader-Cb8JIIcK.js";const K=F("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const me=F("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);const ce=F("file-type",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]]),O={__name:"Alert",props:{class:{type:null,required:!1},variant:{type:String,required:!1}},setup(g){const x=te("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),v=g;return(d,B)=>(o(),m("div",{class:y(t(q)(t(x)({variant:g.variant}),v.class)),role:"alert"},[M(d.$slots,"default")],2))}},W={__name:"AlertTitle",props:{class:{type:null,required:!1}},setup(g){const x=g;return(v,d)=>(o(),m("h5",{class:y(t(q)("mb-1 font-medium leading-none tracking-tight",x.class))},[M(v.$slots,"default")],2))}},X={__name:"AlertDescription",props:{class:{type:null,required:!1}},setup(g){const x=g;return(v,d)=>(o(),m("div",{class:y(t(q)("text-sm [&_p]:leading-relaxed",x.class))},[M(v.$slots,"default")],2))}},pe={class:"p-4 sm:p-6 max-w-3xl mx-auto space-y-6 sm:space-y-10"},ge={class:"flex items-center justify-between gap-4"},xe={class:"flex items-center gap-3 mb-1"},ve={class:"grid grid-cols-3 gap-4"},be={class:"flex items-center gap-3"},ke={key:1},ye={class:"flex flex-col"},_e={class:"text-xs text-slate-500 hidden sm:block"},he={key:0,class:"animate-in fade-in slide-in-from-bottom-4 duration-500"},we={class:"flex flex-col items-center gap-6 text-center z-10 transition-transform duration-300 group-hover:-translate-y-1"},$e={key:0,class:"space-y-1"},Ie={class:"font-bold text-xl text-emerald-700 dark:text-emerald-400"},Ae={class:"text-sm text-slate-500 font-medium"},Ce={key:1,class:"space-y-2"},De={key:1,class:"py-20 px-6 flex flex-col items-center justify-center text-center animate-in fade-in zoom-in-95 duration-500 min-h-[400px]"},Se={class:"relative mb-10 scale-125"},je={class:"absolute inset-0 flex items-center justify-center font-bold text-sm text-indigo-600 dark:text-indigo-400"},ze={class:"w-full max-w-md space-y-2"},Fe={class:"flex justify-between text-xs text-slate-400 font-medium uppercase tracking-wider"},Me={key:2,class:"animate-in fade-in slide-in-from-right-4 duration-500"},qe={class:"flex flex-col sm:flex-row items-center sm:items-start gap-6 text-center sm:text-left"},Be={class:"p-4 bg-emerald-100 text-emerald-600 rounded-full dark:bg-emerald-900/30 ring-8 ring-emerald-50 dark:ring-emerald-950/50"},Ve={class:"space-y-1"},Le={__name:"ImportView",setup(g){const x=re(),v="https://perfect-nikon-perception-range.trycloudflare.com/api/v1",d=k(0),B=[{id:0,title:"Upload",description:"Select your Anki package"},{id:1,title:"Importing",description:"Processing data"},{id:2,title:"Summary",description:"Review results"}],u=k(null),h=k(!1),C=k(!1),p=k(0),_=k(null),b=k(null),Y=n=>{const e=n.target.files[0];V(e)},H=n=>{h.value=!1;const e=n.dataTransfer.files[0];V(e)},V=n=>{n&&n.name.endsWith(".apkg")?(u.value=n,b.value=null):j.error("Invalid file type",{description:"Please select a valid .apkg file"})},Q=()=>{u.value=null,_.value=null,b.value=null,d.value=0,p.value=0},Z=async()=>{if(!u.value)return;d.value=1,C.value=!0,b.value=null,p.value=10;const n=setInterval(()=>{p.value<90&&(p.value+=5)},200),e=new FormData;e.append("file",u.value);const i=localStorage.getItem("auth_token");try{const{data:w,response:ee,error:E}=await de(`${v}/import/anki`,{method:"POST",body:e,headers:{Authorization:`Bearer ${i}`}}).json();if(clearInterval(n),p.value=100,E.value||!ee.value.ok)throw new Error(w.value?.message||E.value||"Upload failed");setTimeout(()=>{_.value=w.value,d.value=2,C.value=!1,j.success("Import successful!")},500)}catch(w){clearInterval(n),C.value=!1,d.value=0,b.value=w.message||"An unexpected error occurred during import.",j.error("Import failed",{description:b.value})}};return(n,e)=>(o(),m("div",pe,[l("div",ge,[l("div",null,[l("div",xe,[e[5]||(e[5]=l("h1",{class:"text-2xl sm:text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-50"},"Import from Anki",-1)),a(t($),{variant:"secondary",class:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800"},{default:s(()=>[...e[4]||(e[4]=[r("Beta",-1)])]),_:1})]),e[6]||(e[6]=l("p",{class:"text-slate-500 dark:text-slate-400 text-lg"},"Migrate your decks and cards effortlessly.",-1))])]),l("div",ve,[(o(),m(ae,null,se(B,i=>l("div",{key:i.id,class:"flex flex-col gap-2 group"},[l("div",be,[l("div",{class:y(["flex h-10 w-10 items-center justify-center rounded-full border-2 text-sm font-bold transition-all duration-300",d.value>=i.id?"border-indigo-600 bg-indigo-600 text-white shadow-md":"border-slate-200 bg-white dark:bg-slate-900 text-slate-400 dark:border-slate-700"])},[d.value>i.id?(o(),I(t(N),{key:0,class:"w-5 h-5"})):(o(),m("span",ke,f(i.id+1),1))],2),l("div",ye,[l("span",{class:y(["font-semibold text-sm transition-colors",d.value>=i.id?"text-slate-900 dark:text-slate-100":"text-slate-400 dark:text-slate-600"])},f(i.title),3),l("span",_e,f(i.description),1)])]),e[7]||(e[7]=l("div",{class:"h-1 w-full rounded-full bg-slate-100 dark:bg-slate-800 absolute bottom-0 left-0 hidden"},null,-1))])),64))]),a(t(oe),{class:"overflow-hidden shadow-xl border-slate-100 dark:border-slate-800 transition-all duration-300 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm"},{default:s(()=>[d.value===0?(o(),m("div",he,[a(t(P),{class:"pb-2"},{default:s(()=>[a(t(U),null,{default:s(()=>[...e[8]||(e[8]=[r("Select File",-1)])]),_:1}),a(t(G),null,{default:s(()=>[...e[9]||(e[9]=[r("Upload an .apkg file exported from Anki. This will import notes, cards, and media.",-1)])]),_:1})]),_:1}),a(t(L),{class:"space-y-6"},{default:s(()=>[a(t(O),{variant:"default",class:"bg-blue-50 border-blue-100 text-blue-800 dark:bg-blue-950/20 dark:border-blue-900/50 dark:text-blue-200"},{default:s(()=>[a(t(K),{class:"h-4 w-4 text-blue-600 dark:text-blue-400"}),a(t(W),null,{default:s(()=>[...e[10]||(e[10]=[r("Import Note",-1)])]),_:1}),a(t(X),{class:"text-blue-700/80 dark:text-blue-300/80"},{default:s(()=>[...e[11]||(e[11]=[r(" Importing creates new decks. Existing decks with different IDs are safe. Large media collections might take a minute. ",-1)])]),_:1})]),_:1}),l("div",{class:y(["relative border-4 border-dashed rounded-2xl p-6 sm:p-12 transition-all cursor-pointer group flex flex-col items-center justify-center min-h-[300px]",[h.value?"border-indigo-500 bg-indigo-50/50 scale-[1.01]":"border-slate-200 hover:border-indigo-300 hover:bg-slate-50 dark:border-slate-800 dark:hover:bg-slate-900/50 dark:hover:border-slate-700",u.value?"bg-emerald-50/50 border-emerald-200 dark:bg-emerald-950/10 dark:border-emerald-800":""]]),onDragover:e[0]||(e[0]=D(i=>h.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=D(i=>h.value=!1,["prevent"])),onDrop:D(H,["prevent"]),onClick:e[2]||(e[2]=i=>n.$refs.fileInput.click())},[l("input",{ref:"fileInput",type:"file",accept:".apkg",class:"hidden",onChange:Y},null,544),l("div",we,[l("div",{class:y(["p-6 rounded-full transition-all duration-300 shadow-sm",u.value?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30":"bg-slate-100 text-slate-500 dark:bg-slate-800 group-hover:bg-white group-hover:shadow-md dark:group-hover:bg-slate-700"])},[u.value?(o(),I(t(ce),{key:0,class:"w-12 h-12"})):(o(),I(t(me),{key:1,class:"w-12 h-12"}))],2),u.value?(o(),m("div",$e,[l("h3",Ie,f(u.value.name),1),l("p",Ae,f((u.value.size/1024/1024).toFixed(2))+" MB",1),e[12]||(e[12]=l("div",{class:"mt-4 inline-flex items-center px-3 py-1 rounded-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-xs text-slate-400 hover:text-slate-600 transition-colors"},"Click to replace",-1))])):(o(),m("div",Ce,[...e[13]||(e[13]=[l("h3",{class:"font-bold text-xl text-slate-900 dark:text-slate-100"},"Drag & Drop your .apkg file",-1),l("p",{class:"text-slate-500 max-w-xs mx-auto"},"or click anywhere in this box to browse your files.",-1)])]))])],34),b.value?(o(),I(t(O),{key:0,variant:"destructive",class:"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-900/50"},{default:s(()=>[a(t(K),{class:"h-4 w-4"}),a(t(W),null,{default:s(()=>[...e[14]||(e[14]=[r("Import Error",-1)])]),_:1}),a(t(X),null,{default:s(()=>[r(f(b.value),1)]),_:1})]),_:1})):T("",!0)]),_:1}),a(t(J),{class:"flex flex-col sm:flex-row gap-4 sm:gap-0 justify-between border-t bg-slate-50/50 dark:bg-slate-950/30 p-6"},{default:s(()=>[e[16]||(e[16]=l("p",{class:"text-xs text-slate-400 w-full sm:max-w-[60%] text-center sm:text-left order-2 sm:order-1 leading-relaxed"},[r(" Need help exporting from Anki? Go to "),l("span",{class:"font-semibold text-slate-600 dark:text-slate-300"},"File > Export..."),r(' and select "Anki Deck Package (*.apkg)". ')],-1)),a(t(S),{onClick:Z,disabled:!u.value,size:"lg",class:"w-full sm:w-auto shadow-lg shadow-indigo-200 dark:shadow-none bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-8 order-1 sm:order-2 transition-all hover:scale-105"},{default:s(()=>[e[15]||(e[15]=r(" Start Import ",-1)),a(t(R),{class:"w-4 h-4 ml-2"})]),_:1},8,["disabled"])]),_:1})])):d.value===1?(o(),m("div",De,[l("div",Se,[a(t(le),{class:"w-20 h-20 text-indigo-200 dark:text-indigo-900 animate-spin"}),l("div",je,f(p.value)+"%",1)]),e[18]||(e[18]=l("h2",{class:"text-3xl font-bold mb-4 text-slate-900 dark:text-slate-100"},"Importing your data...",-1)),e[19]||(e[19]=l("p",{class:"text-slate-500 max-w-md mb-10 text-lg"},"Please wait while we unzip your package, parse the database, and generate your cards. This may take a few moments.",-1)),l("div",ze,[l("div",Fe,[e[17]||(e[17]=l("span",null,"Processing",-1)),l("span",null,f(p.value)+"%",1)]),a(t(ie),{"model-value":p.value,class:"h-3 bg-slate-100 dark:bg-slate-800"},null,8,["model-value"])])])):d.value===2?(o(),m("div",Me,[a(t(P),{class:"border-b bg-emerald-50/30 dark:bg-emerald-900/10 p-8"},{default:s(()=>[l("div",qe,[l("div",Be,[a(t(N),{class:"w-10 h-10"})]),l("div",Ve,[a(t(U),{class:"text-2xl text-emerald-800 dark:text-emerald-400"},{default:s(()=>[...e[20]||(e[20]=[r("Import Complete!",-1)])]),_:1}),a(t(G),{class:"text-base"},{default:s(()=>[...e[21]||(e[21]=[r("Your Anki collection has been successfully migrated.",-1)])]),_:1})])])]),_:1}),a(t(L),{class:"p-0"},{default:s(()=>[a(t(ne),null,{default:s(()=>[a(t(ue),{class:"bg-slate-50 dark:bg-slate-900/50"},{default:s(()=>[a(t(A),{class:"hover:bg-transparent border-slate-100 dark:border-slate-800"},{default:s(()=>[a(t(z),{class:"pl-8 py-4 w-1/2"},{default:s(()=>[...e[22]||(e[22]=[r("Resource",-1)])]),_:1}),a(t(z),{class:"text-right py-4"},{default:s(()=>[...e[23]||(e[23]=[r("Count",-1)])]),_:1}),a(t(z),{class:"text-right pr-8 py-4"},{default:s(()=>[...e[24]||(e[24]=[r("Status",-1)])]),_:1})]),_:1})]),_:1}),a(t(fe),null,{default:s(()=>[a(t(A),{class:"hover:bg-slate-50/50 border-slate-100 dark:border-slate-800"},{default:s(()=>[a(t(c),{class:"font-medium pl-8 py-4 text-slate-700 dark:text-slate-200"},{default:s(()=>[...e[25]||(e[25]=[r("Decks",-1)])]),_:1}),a(t(c),{class:"text-right py-4 font-mono text-slate-600 dark:text-slate-400"},{default:s(()=>[r(f(_.value.decks),1)]),_:1}),a(t(c),{class:"text-right pr-8 py-4"},{default:s(()=>[a(t($),{variant:"outline",class:"text-emerald-600 border-emerald-200 bg-emerald-50"},{default:s(()=>[...e[26]||(e[26]=[r("Created",-1)])]),_:1})]),_:1})]),_:1}),a(t(A),{class:"hover:bg-slate-50/50 border-slate-100 dark:border-slate-800"},{default:s(()=>[a(t(c),{class:"font-medium pl-8 py-4 text-slate-700 dark:text-slate-200"},{default:s(()=>[...e[27]||(e[27]=[r("Notes",-1)])]),_:1}),a(t(c),{class:"text-right py-4 font-mono text-slate-600 dark:text-slate-400"},{default:s(()=>[r(f(_.value.notes),1)]),_:1}),a(t(c),{class:"text-right pr-8 py-4"},{default:s(()=>[a(t($),{variant:"outline",class:"text-emerald-600 border-emerald-200 bg-emerald-50"},{default:s(()=>[...e[28]||(e[28]=[r("Created",-1)])]),_:1})]),_:1})]),_:1}),a(t(A),{class:"hover:bg-slate-50/50 border-slate-100 dark:border-slate-800"},{default:s(()=>[a(t(c),{class:"font-medium pl-8 py-4 text-slate-700 dark:text-slate-200"},{default:s(()=>[...e[29]||(e[29]=[r("Cards",-1)])]),_:1}),a(t(c),{class:"text-right py-4 font-mono text-slate-600 dark:text-slate-400"},{default:s(()=>[r(f(_.value.cards),1)]),_:1}),a(t(c),{class:"text-right pr-8 py-4"},{default:s(()=>[a(t($),{variant:"outline",class:"text-emerald-600 border-emerald-200 bg-emerald-50"},{default:s(()=>[...e[30]||(e[30]=[r("Generated",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(t(J),{class:"flex flex-col-reverse sm:flex-row justify-between items-center p-6 bg-slate-50/30 dark:bg-slate-900/30 border-t gap-3 sm:gap-0"},{default:s(()=>[a(t(S),{variant:"outline",onClick:Q,class:"w-full sm:w-auto border-slate-200 text-slate-600 hover:bg-white hover:border-slate-300"},{default:s(()=>[...e[31]||(e[31]=[r("Import Another",-1)])]),_:1}),a(t(S),{onClick:e[3]||(e[3]=i=>t(x).push("/decks")),class:"w-full sm:w-auto shadow-md shadow-indigo-100 dark:shadow-none bg-indigo-600 hover:bg-indigo-700 text-white font-semibold"},{default:s(()=>[e[32]||(e[32]=r("View Decks ",-1)),a(t(R),{class:"w-4 h-4 ml-2"})]),_:1})]),_:1})])):T("",!0)]),_:1})]))}};export{Le as default};
